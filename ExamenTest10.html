
    <html>
    <head>
        <meta charset="UTF-8">
        <title>Examen</title>
        <style>
            @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Montserrat:wght@400;700&display=swap');
body {
font-family: 'Roboto', Arial, sans-serif;
background-color: #f9f9f9;
color: #333;
line-height: 1.6;
margin: 0;
padding: 20px;
}
.correct {
    color: #28a745; /* A brighter green for better visibility */
    font-weight: bold;
}
.incorrect {
    color: #dc3545; /* A brighter red for better visibility */
    font-weight: bold;
}
.question {
    margin-bottom: 20px;
    padding: 15px;
    border: 1px solid #ddd;
    border-radius: 5px;
    background-color: #fff;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}
.question p {
    font-family: 'Roboto', Arial, sans-serif;
    font-weight: bold;
    font-size: 20px;
    margin-bottom: 10px;
}
.question li {
    font-family: 'Roboto', Arial, sans-serif;
    font-weight: normal;
    font-size: 18px;
    list-style-type: none;
    margin: 5px 0;
    padding: 5px;
    border-radius: 3px;
    transition: background-color 0.3s ease;
}
.question li:hover {
    background-color: #f1f1f1; /* Highlight on hover */
}
input[type="checkbox"] {
    width: 17px;
    height: 17px;
    transform: scale(1.35);
    margin-right: 10px;
    cursor: pointer;
}
.correct-answer {
    display: none;
    font-weight: bold;
    font-size: 16px;
}
.answered {
    pointer-events: none;
}
#testForm {
    max-width: 800px;
    margin: 0 auto;
    background-color: #fff;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}
#submitButton {
    background-color: #007bff;
    color: #fff;
    border: none;
    padding: 10px 20px;
    font-size: 16px;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s ease;
}
#submitButton:hover {
    background-color: #0056b3;
}
#scoreDisplay {
    margin-top: 20px;
    font-size: 18px;
    font-weight: bold;
    text-align: center;
}     
        </style>
    </head>
    <body>
        <form id="testForm" onsubmit="return submitForm()">
    
            <div class="multipleChoice question">
                <p>1: Which sensors can detect the presence or absence of a nearby object? [Tema 5Teacher]</p>  <!-- Mostrar el número de pregunta -->
                
                <ul>
                    <li><input type="checkbox" name="question_0" value="A"> A) IMU (Inertial Measurement Unit).</li><li><input type="checkbox" name="question_0" value="B"> B) PIR Motion Sensor.</li><li><input type="checkbox" name="question_0" value="C"> C) Photoresistor.</li><li><input type="checkbox" name="question_0" value="D"> D) Optocoupler (slotted configuration).</li><li><input type="checkbox" name="question_0" value="E"> E) Hall Effect Sensor.</li>
                </ul>
                <p class="correct-answer">Respuestas correctas: B, D, E</p>
                <input type="hidden" name="correct_0" value="B, D, E">
            </div>
            
            <div class="multipleChoice question">
                <p>2: You need to cache real-time telemetry data for a smart manufacturing dashboard. Reads must be extremely fast and data is ephemeral. What is the most appropriate storage solution? [Tema 6Teacher]</p>  <!-- Mostrar el número de pregunta -->
                
                <ul>
                    <li><input type="checkbox" name="question_1" value="A"> A) PostgreSQL</li><li><input type="checkbox" name="question_1" value="B"> B) Cassandra</li><li><input type="checkbox" name="question_1" value="C"> C) Redis</li><li><input type="checkbox" name="question_1" value="D"> D) HDFS</li>
                </ul>
                <p class="correct-answer">Respuestas correctas: C</p>
                <input type="hidden" name="correct_1" value="C">
            </div>
            
            <div class="multipleChoice question">
                <p>3: A smart city initiative includes sensors in traffic lights, pollution monitors, and public transport vehicles. The system must support real-time actions, mid-term planning, and long-term strategic decisions. Which analytics and data architecture components should be integrated? [Tema 6Teacher]</p>  <!-- Mostrar el número de pregunta -->
                
                <ul>
                    <li><input type="checkbox" name="question_2" value="A"> A) Descriptive statistics to summarize daily patterns.</li><li><input type="checkbox" name="question_2" value="B"> B) Supervised learning classifiers deployed in real-time edge devices.</li><li><input type="checkbox" name="question_2" value="C"> C) Stream analytics for event-driven responses.</li><li><input type="checkbox" name="question_2" value="D"> D) Message brokers for decoupled, scalable data ingestion.</li><li><input type="checkbox" name="question_2" value="E"> E) Batch processing for pattern detection and trend forecasting.</li>
                </ul>
                <p class="correct-answer">Respuestas correctas: A, C, D, E</p>
                <input type="hidden" name="correct_2" value="A, C, D, E">
            </div>
            
            <div class="multipleChoice question">
                <p>4: A remote industrial plant wants to monitor vibration-based machine degradation and power usage using a non-invasive system. Which sensors are relevant? [Tema 5Teacher]</p>  <!-- Mostrar el número de pregunta -->
                
                <ul>
                    <li><input type="checkbox" name="question_3" value="A"> A) Laser vibrometer.</li><li><input type="checkbox" name="question_3" value="B"> B) Hall effect sensor.</li><li><input type="checkbox" name="question_3" value="C"> C) Inductive current clamp.</li><li><input type="checkbox" name="question_3" value="D"> D) MEMS accelerometer.</li><li><input type="checkbox" name="question_3" value="E"> E) LDR (Light Dependent Resistor).</li>
                </ul>
                <p class="correct-answer">Respuestas correctas: B, C, D</p>
                <input type="hidden" name="correct_3" value="B, C, D">
            </div>
            
            <div class="multipleChoice question">
                <p>5: Which of the following most accurately characterizes the role of APIs in cloud-based IoT platforms? [Tema 7Teacher]</p>  <!-- Mostrar el número de pregunta -->
                
                <ul>
                    <li><input type="checkbox" name="question_4" value="A"> A) APIs enable human operators to configure cloud dashboards manually.</li><li><input type="checkbox" name="question_4" value="B"> B) APIs replace the need for middleware in IoT applications.</li><li><input type="checkbox" name="question_4" value="C"> C) APIs are used to hard-code device behaviors in firmware.</li><li><input type="checkbox" name="question_4" value="D"> D) APIs facilitate interoperability and programmatic interaction among services, devices, and data.</li>
                </ul>
                <p class="correct-answer">Respuestas correctas: D</p>
                <input type="hidden" name="correct_4" value="D">
            </div>
            
            <div class="multipleChoice question">
                <p>6: A company is deploying IoT sensors in trucks to monitor engine temperature and geolocation in real time. Alerts must be issued if overheating is detected outside of predefined geofences. What architectural component is most critical for supporting such functionality? [Tema 6Teacher]</p>  <!-- Mostrar el número de pregunta -->
                
                <ul>
                    <li><input type="checkbox" name="question_5" value="A"> A) SQL-based relational backend.</li><li><input type="checkbox" name="question_5" value="B"> B) Rules engine with location-aware logic.</li><li><input type="checkbox" name="question_5" value="C"> C) Bloom filter.</li><li><input type="checkbox" name="question_5" value="D"> D) Kalman filter.</li>
                </ul>
                <p class="correct-answer">Respuestas correctas: B</p>
                <input type="hidden" name="correct_5" value="B">
            </div>
            
            <div class="multipleChoice question">
                <p>7: Which dynamic sensor system oscillates before settling at its final value? [Tema 5Teacher]</p>  <!-- Mostrar el número de pregunta -->
                
                <ul>
                    <li><input type="checkbox" name="question_6" value="A"> A) Linearized system.</li><li><input type="checkbox" name="question_6" value="B"> B) Second-order system.</li><li><input type="checkbox" name="question_6" value="C"> C) First-order system.</li><li><input type="checkbox" name="question_6" value="D"> D) Zero-order system.</li>
                </ul>
                <p class="correct-answer">Respuestas correctas: B</p>
                <input type="hidden" name="correct_6" value="B">
            </div>
            
            <div class="multipleChoice question">
                <p>8: In an IoT-based smart irrigation system, the goal is to learn when to activate water valves based on historical and current sensor data. Which type of learning is most appropriate? [Tema 6Teacher]</p>  <!-- Mostrar el número de pregunta -->
                
                <ul>
                    <li><input type="checkbox" name="question_7" value="A"> A) Clustering.</li><li><input type="checkbox" name="question_7" value="B"> B) Dimensionality reduction.</li><li><input type="checkbox" name="question_7" value="C"> C) Reinforcement learning.</li><li><input type="checkbox" name="question_7" value="D"> D) Unsupervised learning.</li>
                </ul>
                <p class="correct-answer">Respuestas correctas: C</p>
                <input type="hidden" name="correct_7" value="C">
            </div>
            
            <div class="multipleChoice question">
                <p>9: Which sensor would be most appropriate for measuring soil moisture in a low-cost agricultural IoT system with a basic microcontroller? [Tema 5Teacher]</p>  <!-- Mostrar el número de pregunta -->
                
                <ul>
                    <li><input type="checkbox" name="question_8" value="A"> A) Tensiometer with barometric pressure transducer.</li><li><input type="checkbox" name="question_8" value="B"> B) Thermal conductivity hygrometer.</li><li><input type="checkbox" name="question_8" value="C"> C) Capacitive soil humidity sensor.</li><li><input type="checkbox" name="question_8" value="D"> D) Time domain reflectometry (TDR) sensor.</li>
                </ul>
                <p class="correct-answer">Respuestas correctas: C</p>
                <input type="hidden" name="correct_8" value="C">
            </div>
            
            <div class="multipleChoice question">
                <p>10: Which of the following are key features of Ceilometer, the OpenStack telemetry system? [Tema 7Teacher]</p>  <!-- Mostrar el número de pregunta -->
                
                <ul>
                    <li><input type="checkbox" name="question_9" value="A"> A) Metering of resource usage (CPU, memory, bandwidth).</li><li><input type="checkbox" name="question_9" value="B"> B) Collection of metrics for autoscaling decisions.</li><li><input type="checkbox" name="question_9" value="C"> C) Management of VM state transitions (e.g., MIGRATING → ACTIVE).</li><li><input type="checkbox" name="question_9" value="D"> D) Pricing conversion (rating) and initiation of billing.</li><li><input type="checkbox" name="question_9" value="E"> E) Scheduling of container migrations between hosts.</li>
                </ul>
                <p class="correct-answer">Respuestas correctas: A, B, D</p>
                <input type="hidden" name="correct_9" value="A, B, D">
            </div>
            
            <input id="submitButton" type="submit" value="Enviar respuestas">
        </form>
        <p id="scoreDisplay"></p>
    </body>
    </html>
    <script>
function submitForm() {
    var form = document.getElementById("testForm");
    form.elements["submitButton"].disabled = true;

    var correctGlobal = 0;
    var incorrectGlobal = 0;
    var unanswered = 0;
    var totalScore = 0;

    var questions = document.getElementsByClassName("singleChoice");

    for (var question of questions) {
        var score = singleChoice(question);
        if (score === 1) {
            correctGlobal++;
            totalScore += score;
        } else if (isNaN(score)) {
            unanswered++;
        } else {
            incorrectGlobal++;
            totalScore += score;
        }
    }

    var questions = document.getElementsByClassName("multipleChoice");

    for (var question of questions) {
        var score = multipleChoice(question);
        if (score === 1) {
            correctGlobal++;
            totalScore += score;
        } else if (isNaN(score)) {
            unanswered++;
        } else {
            incorrectGlobal++;
            totalScore += score;
        }
    }

    console.log("Score out of all questions: " + totalScore);
    console.log("Correct: " + correctGlobal);
    console.log("Incorrect: " + incorrectGlobal);
    console.log("Unanswered: " + unanswered);

    // We calculate the score out of 10
    totalScore = ((totalScore / (correctGlobal + incorrectGlobal + unanswered)) * 10).toFixed(2);

    console.log("Score out of 10: " + totalScore);

    var scoreDisplay = document.getElementById("scoreDisplay");
    scoreDisplay.innerHTML = "Preguntas acertadas: " + correctGlobal + "<br>Preguntas falladas: " + incorrectGlobal + "<br>Puntuación total: " + totalScore + "/10";

    return false;
}
function singleChoice(question) {
    var selectedInput = question.querySelector("input:checked");
    var correctAnswer = question.querySelector(".correct-answer");
    correctAnswer.style.display = "block";

    // We only count the ones with radio buttons
    var options = question.querySelectorAll("input[type=radio]");
    var numOptions = options.length;

    // Disable all radio buttons to prevent changing the answer
    options.forEach(input => input.disabled = true);

    if (selectedInput && selectedInput.value === correctAnswer.innerHTML.split(":")[1].trim()) {
        correctAnswer.classList.add("correct");
    } else {
        correctAnswer.classList.add("incorrect");
    }

    // We log the number of the question and score

    // If it is correct we return 1
    if (selectedInput && selectedInput.value === correctAnswer.innerHTML.split(":")[1].trim()) {
        console.log(question.querySelector("p").innerHTML.split(":")[0] + " - Score: 1");
        return 1;
    } //If there is no answer we return NaN
    else if (selectedInput === null) {
        console.log(question.querySelector("p").innerHTML.split(":")[0] + " - Score: NaN");
        return NaN;
    } //If it is incorrect we return the penalty for random guessing
    else {
        console.log(question.querySelector("p").innerHTML.split(":")[0] + " - Score: -1/" + (numOptions - 1));
        return -1/(numOptions - 1);
    }
}
function multipleChoice(question) {
    var selectedInputs = question.querySelectorAll("input:checked");

    // Get the correct answer element
    var correctAnswer = question.querySelector(".correct-answer");

    // Extract the correct answers from the hidden input field
    var correctAnswers = question.querySelector("input[name^='correct_']");
    var correctAnswersArray = correctAnswers ? correctAnswers.value.split(",").map(x => x.trim()) : [];

    // Display the correct answers
    question.querySelectorAll(".correct-answer").forEach(x => x.style.display = "block");

    // Get the total number of checkbox options
    var options = question.querySelectorAll("input[type=checkbox]");
    var numOptions = options.length;

    // Disable all checkboxes to prevent changing the answer
    options.forEach(input => input.disabled = true);

    var correct = 0;
    var incorrect = 0;
    var unanswered = 0;

    // Iterate over selected inputs to mark correct/incorrect answers
    for (var selectedInput of selectedInputs) {
        var listItem = selectedInput.closest("li"); // Get the <li> containing the checkbox

        if (listItem) {
            if (correctAnswersArray.includes(selectedInput.value)) {
                // listItem.classList.add("correct"); // Apply class to the entire list item
                correct++;
            } else {
                // listItem.classList.add("incorrect");
                incorrect++;
            }
        }
    }

    // We log the number of the question and score

    // If all the correct answers are selected and no incorrect answers are selected
    // we return 1
    if (correct === correctAnswersArray.length && incorrect === 0) {
        correctAnswer.classList.add("correct");
        console.log(question.querySelector("p").innerHTML.split(":")[0] + " - Score: 1");
        return 1;
    } // If there are no answers we return NaN
    else if (selectedInputs.length === 0) {
        correctAnswer.classList.add("incorrect");
        console.log(question.querySelector("p").innerHTML.split(":")[0] + " - Score: NaN");
        return NaN;
    } // If there are incorrect answers we return the penalty for random guessing
    else {
        correctAnswer.classList.add("incorrect");
        console.log(question.querySelector("p").innerHTML.split(":")[0] + " - Score: -0.5");
        return -0.5;
    }

}
</script>