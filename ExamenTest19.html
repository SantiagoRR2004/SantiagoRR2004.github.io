
    <html>
    <head>
        <meta charset="UTF-8">
        <title>Examen</title>
        <style>
            @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Montserrat:wght@400;700&display=swap');
body {
font-family: 'Roboto', Arial, sans-serif;
background-color: #f9f9f9;
color: #333;
line-height: 1.6;
margin: 0;
padding: 20px;
}
.correct {
    color: #28a745; /* A brighter green for better visibility */
    font-weight: bold;
}
.incorrect {
    color: #dc3545; /* A brighter red for better visibility */
    font-weight: bold;
}
.question {
    margin-bottom: 20px;
    padding: 15px;
    border: 1px solid #ddd;
    border-radius: 5px;
    background-color: #fff;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}
.question p {
    font-family: 'Roboto', Arial, sans-serif;
    font-weight: bold;
    font-size: 20px;
    margin-bottom: 10px;
}
.question li {
    font-family: 'Roboto', Arial, sans-serif;
    font-weight: normal;
    font-size: 18px;
    list-style-type: none;
    margin: 5px 0;
    padding: 5px;
    border-radius: 3px;
    transition: background-color 0.3s ease;
}
.question li:hover {
    background-color: #f1f1f1; /* Highlight on hover */
}
input[type="checkbox"] {
    width: 17px;
    height: 17px;
    transform: scale(1.35);
    margin-right: 10px;
    cursor: pointer;
}
.correct-answer {
    display: none;
    font-weight: bold;
    font-size: 16px;
}
.answered {
    pointer-events: none;
}
#testForm {
    max-width: 800px;
    margin: 0 auto;
    background-color: #fff;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}
#submitButton {
    background-color: #007bff;
    color: #fff;
    border: none;
    padding: 10px 20px;
    font-size: 16px;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s ease;
}
#submitButton:hover {
    background-color: #0056b3;
}
#scoreDisplay {
    margin-top: 20px;
    font-size: 18px;
    font-weight: bold;
    text-align: center;
}     
        </style>
    </head>
    <body>
        <form id="testForm" onsubmit="return submitForm()">
    
            <div class="multipleChoice question">
                <p>1: Which of the following best explains how open data contributes to smart city development? [Tema 8Teacher]</p>  <!-- Mostrar el número de pregunta -->
                
                <ul>
                    <li><input type="checkbox" name="question_0" value="A"> A) It helps enforce strict access controls on IoT systems.</li><li><input type="checkbox" name="question_0" value="B"> B) It boosts innovation and transparency by enabling access to datasets by all stakeholders.</li><li><input type="checkbox" name="question_0" value="C"> C) It ensures only private companies have access to high-value datasets.</li><li><input type="checkbox" name="question_0" value="D"> D) It eliminates the need for interoperability between data silos.</li>
                </ul>
                <p class="correct-answer">Respuestas correctas: B</p>
                <input type="hidden" name="correct_0" value="B">
            </div>
            
            <div class="multipleChoice question">
                <p>2: Which of the following are core properties of cloud computing as described in the reading? [Tema 7Teacher]</p>  <!-- Mostrar el número de pregunta -->
                
                <ul>
                    <li><input type="checkbox" name="question_1" value="A"> A) Manual SLA negotiation for each resource change.</li><li><input type="checkbox" name="question_1" value="B"> B) Automated provisioning and de-provisioning.</li><li><input type="checkbox" name="question_1" value="C"> C) Pay-as-you-go billing model.</li><li><input type="checkbox" name="question_1" value="D"> D) Application integration via APIs.</li><li><input type="checkbox" name="question_1" value="E"> E) High dependency on local resource availability.</li>
                </ul>
                <p class="correct-answer">Respuestas correctas: B, C, D</p>
                <input type="hidden" name="correct_1" value="B, C, D">
            </div>
            
            <div class="multipleChoice question">
                <p>3: A company is deploying IoT sensors in trucks to monitor engine temperature and geolocation in real time. Alerts must be issued if overheating is detected outside of predefined geofences. What architectural component is most critical for supporting such functionality? [Tema 6Teacher]</p>  <!-- Mostrar el número de pregunta -->
                
                <ul>
                    <li><input type="checkbox" name="question_2" value="A"> A) Kalman filter.</li><li><input type="checkbox" name="question_2" value="B"> B) Bloom filter.</li><li><input type="checkbox" name="question_2" value="C"> C) SQL-based relational backend.</li><li><input type="checkbox" name="question_2" value="D"> D) Rules engine with location-aware logic.</li>
                </ul>
                <p class="correct-answer">Respuestas correctas: D</p>
                <input type="hidden" name="correct_2" value="D">
            </div>
            
            <div class="multipleChoice question">
                <p>4: You are deploying an indoor air quality monitoring system with multiple gas sensors. The devices are battery-powered. Which communication strategy is most power-efficient? [Tema 5Teacher]</p>  <!-- Mostrar el número de pregunta -->
                
                <ul>
                    <li><input type="checkbox" name="question_3" value="A"> A) Transmit every second using HTTP POST requests.</li><li><input type="checkbox" name="question_3" value="B"> B) Use a fixed-rate polling approach with long-range Wi-Fi.</li><li><input type="checkbox" name="question_3" value="C"> C) Employ event-triggered reporting with LoRa or BLE.</li><li><input type="checkbox" name="question_3" value="D"> D) Keep the radio on continuously for real-time access.</li>
                </ul>
                <p class="correct-answer">Respuestas correctas: C</p>
                <input type="hidden" name="correct_3" value="C">
            </div>
            
            <div class="multipleChoice question">
                <p>5: Which of the following data flows best describe a fully centralized IoT architecture? [Tema 6Teacher]</p>  <!-- Mostrar el número de pregunta -->
                
                <ul>
                    <li><input type="checkbox" name="question_4" value="A"> A) Production → Edge Analysis → Local Archiving.</li><li><input type="checkbox" name="question_4" value="B"> B) Production → Aggregation → Preprocessing → Storage → Analysis.</li><li><input type="checkbox" name="question_4" value="C"> C) Production → Collection → Filtering → Delivery → Query Response.</li><li><input type="checkbox" name="question_4" value="D"> D) Production → Fusion → Cloud Storage → Historical Trend Analysis.</li><li><input type="checkbox" name="question_4" value="E"> E) Query → Production → In-network Processing → Local Delivery.</li>
                </ul>
                <p class="correct-answer">Respuestas correctas: B, D</p>
                <input type="hidden" name="correct_4" value="B, D">
            </div>
            
            <div class="multipleChoice question">
                <p>6: A factory needs to detect leaks of various organic solvents (ethanol, methanol, etc.). Which sensor characteristics or technologies are relevant? [Tema 5Teacher]</p>  <!-- Mostrar el número de pregunta -->
                
                <ul>
                    <li><input type="checkbox" name="question_5" value="A"> A) Catalytic oxidation capability.</li><li><input type="checkbox" name="question_5" value="B"> B) ISFET with solvent-specific membrane.</li><li><input type="checkbox" name="question_5" value="C"> C) Requirement for heating element.</li><li><input type="checkbox" name="question_5" value="D"> D) Use of infrared pyrometer for gas detection.</li><li><input type="checkbox" name="question_5" value="E"> E) Pore-filtering for molecular selectivity.</li>
                </ul>
                <p class="correct-answer">Respuestas correctas: A, C, E</p>
                <input type="hidden" name="correct_5" value="A, C, E">
            </div>
            
            <div class="multipleChoice question">
                <p>7: An IoT start-up needs rapid development, scalability, minimal investment, and real-time analytics. Which cloud platforms or models fit? [Tema 7Teacher]</p>  <!-- Mostrar el número de pregunta -->
                
                <ul>
                    <li><input type="checkbox" name="question_6" value="A"> A) On-premise private cloud with manual scaling.</li><li><input type="checkbox" name="question_6" value="B"> B) PaaS model like Microsoft Azure IoT.</li><li><input type="checkbox" name="question_6" value="C"> C) Open-source platform like OpenIoT supporting semantic data models.</li><li><input type="checkbox" name="question_6" value="D"> D) Amazon AWS IoT with integrated rules engine and SDKs.</li><li><input type="checkbox" name="question_6" value="E"> E) SaaS solution tailored to general medical record keeping.</li>
                </ul>
                <p class="correct-answer">Respuestas correctas: B, C, D</p>
                <input type="hidden" name="correct_6" value="B, C, D">
            </div>
            
            <div class="multipleChoice question">
                <p>8: You are designing a system that needs precise indoor tracking of individuals within a hospital. Which method is the best fit, considering both accuracy and infrastructure? [Tema 5Teacher]</p>  <!-- Mostrar el número de pregunta -->
                
                <ul>
                    <li><input type="checkbox" name="question_7" value="A"> A) GNSS with differential correction.</li><li><input type="checkbox" name="question_7" value="B"> B) RSSI-based WiFi trilateration.</li><li><input type="checkbox" name="question_7" value="C"> C) Bluetooth beacon fingerprinting.</li><li><input type="checkbox" name="question_7" value="D"> D) Hall effect sensors at doorways.</li>
                </ul>
                <p class="correct-answer">Respuestas correctas: C</p>
                <input type="hidden" name="correct_7" value="C">
            </div>
            
            <div class="multipleChoice question">
                <p>9: Which dynamic sensor system oscillates before settling at its final value? [Tema 5Teacher]</p>  <!-- Mostrar el número de pregunta -->
                
                <ul>
                    <li><input type="checkbox" name="question_8" value="A"> A) First-order system.</li><li><input type="checkbox" name="question_8" value="B"> B) Zero-order system.</li><li><input type="checkbox" name="question_8" value="C"> C) Second-order system.</li><li><input type="checkbox" name="question_8" value="D"> D) Linearized system.</li>
                </ul>
                <p class="correct-answer">Respuestas correctas: C</p>
                <input type="hidden" name="correct_8" value="C">
            </div>
            
            <div class="multipleChoice question">
                <p>10: In an industrial control system with several sensor readings and a few critical emergency triggers, which structure provides the best compromise between responsiveness and control flow? [Tema 5Teacher]</p>  <!-- Mostrar el número de pregunta -->
                
                <ul>
                    <li><input type="checkbox" name="question_9" value="A"> A) All logic handled in a single super-loop.</li><li><input type="checkbox" name="question_9" value="B"> B) Mixed design: polling for regular data, interrupts for urgent events.</li><li><input type="checkbox" name="question_9" value="C"> C) All logic inside interrupt handlers.</li><li><input type="checkbox" name="question_9" value="D"> D) Time-triggered polling for all inputs.</li>
                </ul>
                <p class="correct-answer">Respuestas correctas: B</p>
                <input type="hidden" name="correct_9" value="B">
            </div>
            
            <input id="submitButton" type="submit" value="Enviar respuestas">
        </form>
        <p id="scoreDisplay"></p>
    </body>
    </html>
    <script>
function submitForm() {
    var form = document.getElementById("testForm");
    form.elements["submitButton"].disabled = true;

    var correctGlobal = 0;
    var incorrectGlobal = 0;
    var unanswered = 0;
    var totalScore = 0;

    var questions = document.getElementsByClassName("singleChoice");

    for (var question of questions) {
        var score = singleChoice(question);
        if (score === 1) {
            correctGlobal++;
            totalScore += score;
        } else if (isNaN(score)) {
            unanswered++;
        } else {
            incorrectGlobal++;
            totalScore += score;
        }
    }

    var questions = document.getElementsByClassName("multipleChoice");

    for (var question of questions) {
        var score = multipleChoice(question);
        if (score === 1) {
            correctGlobal++;
            totalScore += score;
        } else if (isNaN(score)) {
            unanswered++;
        } else {
            incorrectGlobal++;
            totalScore += score;
        }
    }

    console.log("Score out of all questions: " + totalScore);
    console.log("Correct: " + correctGlobal);
    console.log("Incorrect: " + incorrectGlobal);
    console.log("Unanswered: " + unanswered);

    // We calculate the score out of 10
    totalScore = ((totalScore / (correctGlobal + incorrectGlobal + unanswered)) * 10).toFixed(2);

    console.log("Score out of 10: " + totalScore);

    var scoreDisplay = document.getElementById("scoreDisplay");
    scoreDisplay.innerHTML = "Preguntas acertadas: " + correctGlobal + "<br>Preguntas falladas: " + incorrectGlobal + "<br>Puntuación total: " + totalScore + "/10";

    return false;
}
function singleChoice(question) {
    var selectedInput = question.querySelector("input:checked");
    var correctAnswer = question.querySelector(".correct-answer");
    correctAnswer.style.display = "block";

    // We only count the ones with radio buttons
    var options = question.querySelectorAll("input[type=radio]");
    var numOptions = options.length;

    // Disable all radio buttons to prevent changing the answer
    options.forEach(input => input.disabled = true);

    if (selectedInput && selectedInput.value === correctAnswer.innerHTML.split(":")[1].trim()) {
        correctAnswer.classList.add("correct");
    } else {
        correctAnswer.classList.add("incorrect");
    }

    // We log the number of the question and score

    // If it is correct we return 1
    if (selectedInput && selectedInput.value === correctAnswer.innerHTML.split(":")[1].trim()) {
        console.log(question.querySelector("p").innerHTML.split(":")[0] + " - Score: 1");
        return 1;
    } //If there is no answer we return NaN
    else if (selectedInput === null) {
        console.log(question.querySelector("p").innerHTML.split(":")[0] + " - Score: NaN");
        return NaN;
    } //If it is incorrect we return the penalty for random guessing
    else {
        console.log(question.querySelector("p").innerHTML.split(":")[0] + " - Score: -1/" + (numOptions - 1));
        return -1/(numOptions - 1);
    }
}
function multipleChoice(question) {
    var selectedInputs = question.querySelectorAll("input:checked");

    // Get the correct answer element
    var correctAnswer = question.querySelector(".correct-answer");

    // Extract the correct answers from the hidden input field
    var correctAnswers = question.querySelector("input[name^='correct_']");
    var correctAnswersArray = correctAnswers ? correctAnswers.value.split(",").map(x => x.trim()) : [];

    // Display the correct answers
    question.querySelectorAll(".correct-answer").forEach(x => x.style.display = "block");

    // Get the total number of checkbox options
    var options = question.querySelectorAll("input[type=checkbox]");
    var numOptions = options.length;

    // Disable all checkboxes to prevent changing the answer
    options.forEach(input => input.disabled = true);

    var correct = 0;
    var incorrect = 0;
    var unanswered = 0;

    // Iterate over selected inputs to mark correct/incorrect answers
    for (var selectedInput of selectedInputs) {
        var listItem = selectedInput.closest("li"); // Get the <li> containing the checkbox

        if (listItem) {
            if (correctAnswersArray.includes(selectedInput.value)) {
                // listItem.classList.add("correct"); // Apply class to the entire list item
                correct++;
            } else {
                // listItem.classList.add("incorrect");
                incorrect++;
            }
        }
    }

    // We log the number of the question and score

    // If all the correct answers are selected and no incorrect answers are selected
    // we return 1
    if (correct === correctAnswersArray.length && incorrect === 0) {
        correctAnswer.classList.add("correct");
        console.log(question.querySelector("p").innerHTML.split(":")[0] + " - Score: 1");
        return 1;
    } // If there are no answers we return NaN
    else if (selectedInputs.length === 0) {
        correctAnswer.classList.add("incorrect");
        console.log(question.querySelector("p").innerHTML.split(":")[0] + " - Score: NaN");
        return NaN;
    } // If there are incorrect answers we return the penalty for random guessing
    else {
        correctAnswer.classList.add("incorrect");
        console.log(question.querySelector("p").innerHTML.split(":")[0] + " - Score: -0.5");
        return -0.5;
    }

}
</script>